<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
    <title>AI ç”Ÿæ´»å°ç§˜æ›¸ | å…¨æ–¹ä½æ•¸ä½è¼”åŠ©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --gold-primary: #D4AF37; --gold-light: #FFD700; --dark-bg: #050505; --neon-green: #00ff88; --neon-orange: #ff8c00; --neon-blue: #00e5ff; --neon-red: #ff4444; }
        body { font-family: 'Segoe UI', "Microsoft JhengHei", sans-serif; background: var(--dark-bg); color: #fff; padding: 20px; display: flex; justify-content: center; min-height: 100vh; margin: 0; }
        .container { width: 100%; max-width: 450px; background: rgba(15, 15, 15, 0.98); border: 1px solid var(--gold-primary); border-radius: 24px; padding: 25px; box-shadow: 0 0 30px rgba(212, 175, 55, 0.3); }
        .brand-header { margin-bottom: 25px; border-bottom: 2px solid var(--gold-primary); padding-bottom: 15px; text-align: center; }
        .section-title { font-size: 0.92em; color: var(--gold-primary); text-align: left; margin: 25px 0 12px 5px; border-left: 4px solid var(--gold-primary); padding-left: 10px; font-weight: 800; }
        .greeting-box { background: linear-gradient(135deg, rgba(212,175,55,0.15) 0%, rgba(0,0,0,1) 100%); border-radius: 15px; padding: 18px; margin-bottom: 20px; border: 1px solid rgba(212,175,55,0.3); }
        .keyword-tag { display: inline-block; background: rgba(255,255,255,0.05); color: var(--gold-light); padding: 3px 8px; border-radius: 4px; font-size: 0.72em; margin: 2px; border: 1px solid rgba(212,175,55,0.2); }
        .condition-box { background: rgba(0, 229, 255, 0.05); border-radius: 12px; padding: 15px; margin-bottom: 20px; border: 1px solid var(--neon-blue); }
        .cond-item { font-size: 0.85em; margin-bottom: 8px; color: var(--neon-blue); display: flex; align-items: flex-start; gap: 8px; }
        .report-card { background: #0a0a0a; border-radius: 20px; padding: 18px; margin-top: 15px; border: 1px solid var(--gold-primary); position: relative; }
        .zone-box { margin-bottom: 15px; padding: 15px; border-radius: 12px; background: rgba(255,255,255,0.02); border: 1px solid #222; }
        .step-row { display: flex; gap: 10px; margin-bottom: 8px; font-size: 0.82em; line-height: 1.4; }
        .step-num { color: var(--gold-light); font-weight: bold; flex-shrink: 0; width: 65px; }
        .reward-tag { display: block; background: rgba(0, 255, 136, 0.05); color: var(--neon-green); padding: 8px; border-radius: 8px; font-weight: bold; margin: 10px 0; text-align: center; font-size: 0.9em; border: 1px solid var(--neon-green); }
        .legal-warning { background: rgba(255, 68, 68, 0.05); border: 1px dashed var(--neon-red); padding: 15px; font-size: 0.75em; color: #ff9999; text-align: justify; margin: 15px 0; border-radius: 12px; line-height: 1.6; }
        .btn-main { width: 100%; padding: 16px; border: none; border-radius: 14px; font-weight: 800; cursor: pointer; transition: 0.3s; margin-top: 10px; font-size: 1.1em; display: inline-block; text-align: center; box-sizing: border-box; text-decoration: none; }
        .btn-match { background: linear-gradient(45deg, #D4AF37, #FFD700); color: #000; box-shadow: 0 4px 15px rgba(212, 175, 55, 0.4); }
        .btn-arsenal { background: #000; color: var(--gold-primary); border: 1px solid var(--gold-primary); margin-top: 20px; display: none; }
        input { width: 100%; background: #111; border: 1px solid #444; color: #fff; padding: 14px; border-radius: 10px; box-sizing: border-box; margin-bottom: 12px; font-size: 1em; outline: none; }
        
        .ä¿ç‰Œæç¤º { background: rgba(255, 140, 0, 0.1); border: 1px solid var(--neon-orange); padding: 12px; border-radius: 12px; margin-bottom: 15px; font-size: 0.78em; color: var(--neon-orange); line-height: 1.5; }
        .copy-btn { background: none; border: 1px solid var(--neon-blue); color: var(--neon-blue); cursor: pointer; font-size: 0.7em; padding: 3px 8px; border-radius: 6px; margin-left: 10px; }
        #match-area { display:none; }
        #receive-notify { display:none; background: linear-gradient(135deg, rgba(212,175,55,0.2) 0%, rgba(0,0,0,1) 100%); border: 2px solid var(--gold-primary); padding: 20px; border-radius: 20px; margin-top: 20px; text-align: center; }
    </style>
</head>
<body>
<div class="container">
    <div class="brand-header">
        <h2 id="cloud_title" style="margin:0;"><span style="color:var(--gold-primary)">AI ç”Ÿæ´»å°ç§˜æ›¸</span></h2>
        <div style="font-size: 0.82em; color: var(--gold-light);">å…¨æ–¹ä½æ•¸ä½è¼”åŠ©ç³»çµ±æ ¸å¿ƒ</div>
    </div>

    <div class="ä¿ç‰Œæç¤º">
        âš ï¸ <strong>é ˜è¢–ä¿ç‰Œæç¤ºï¼š</strong> å»ºè­°æ¯æœˆ 1-5 è™Ÿå„ªå…ˆå®Œæˆ PV å›å ±ã€‚ç³»çµ±åª’åˆæ¡å³æ™‚æŸ¥é©—ï¼Œè‹¥åª’åˆç•¶ä¸‹ç‚º 0PV å°‡è‡ªå‹•è·³éå—è´ˆæ¬Šï¼Œç›´è‡³ PV æ›´æ–°ã€‚
    </div>

    <div class="greeting-box">
        <p id="cloud_greeting" style="margin:0 0 10px 0; font-weight:bold; color:var(--gold-light);">âœ¨ æ‚¨å¥½ï¼é ˜è¢–ï¼Œæ­¡è¿é€²å…¥æ•¸ä½æ ¸å¿ƒ...</p>
        <div>
            <span class="keyword-tag">å…è²»æœƒå“¡</span><span class="keyword-tag">è¶…ç´šAIå·¥å…·</span><span class="keyword-tag">è§’è‰²å½©è›‹</span>
            <span class="keyword-tag">50å…ƒè³¼ç‰©é‡‘</span><span class="keyword-tag">99å…ƒæ¨è–¦çé‡‘</span><span class="keyword-tag">å…è²»å‡ºåœ‹æ—…éŠ</span>
            <span class="keyword-tag">å…å¹´è²»</span><span class="keyword-tag">æ»¿ç™¾æé ˜</span>
        </div>
    </div>

    <div id="receive-notify">
        <div style="font-size: 1.5em; margin-bottom: 10px;">ğŸ† è³€ï¼æœ‰äººæº–å‚™è´ŠåŠ©æ‚¨</div>
        <p style="font-size: 0.9em; color: var(--gold-light);">é ˜è¢–å¤¥ä¼´å·²ç™¼èµ·è´ŠåŠ©è½‰å¸³</p>
        <p style="font-size: 0.8em; color: #ccc;">è«‹æŸ¥æ”¶æ‚¨çš„éŠ€è¡Œå¸³æˆ¶ï¼Œç¢ºèªæ”¶åˆ° 3,000 å…ƒå¾Œï¼š</p>
        <button class="btn-main" style="background:var(--neon-green); color:#000;" onclick="confirmReceived()">ç¢ºèªæ”¶åˆ°è´ŠåŠ©é‡‘ ğŸ’</button>
    </div>

    <div class="condition-box">
        <div class="cond-item"><i class="fas fa-id-card"></i> <strong>åŠ å…¥æ¢ä»¶ï¼š</strong> è¨»å†Šå®Œæˆä¸¦å–å¾— 1500 PVã€‚</div>
        <div class="cond-item"><i class="fas fa-coins"></i> <strong>è´ŠåŠ©é‡‘é¡ï¼š</strong> æ¯ç­†è´ŠåŠ©é‡‘é¡å›ºå®šç‚º 3,000 å…ƒã€‚</div>
    </div>

    <div class="section-title">âš™ï¸ 2-2-2 å¾ªç’°ç”Ÿå‘½é€±æœŸ</div>
    <div class="report-card">
        <div class="zone-box" style="border-left: 4px solid var(--neon-green);">
            <div style="color:var(--neon-green); font-weight:bold; margin-bottom:8px;">ã€A å€ï¼šåŸºåº§é‡ç”Ÿæ¨¡å‹ã€‘</div>
            <div class="step-row"><span class="step-num" style="color:var(--neon-green);">2çµ¦ â¡ 2å¹«</span><span>å®Œæˆå¯¦è³ªè½‰å¸³ï¼Œå•Ÿå‹•æ•¸ä½åˆ†èº«åå“ºèƒ½é‡ã€‚</span></div>
        </div>
    </div>

    <div class="legal-warning">
        âš–ï¸ <strong>æ³•å¾‹è‡ªé¡˜è²æ˜ï¼š</strong> ä¸€åˆ‡åƒåŠ è´ŠåŠ©ä¹‹è¡Œç‚ºå‡å±¬å€‹äººè‡ªé¡˜ï¼Œæœ¬ç³»çµ±åƒ…æ“”ä»»æŠ€è¡“ç›£ç£ï¼Œ100% ç„¡æåˆ°å¸³ã€‚
    </div>

    <div class="section-title">ğŸš€ å‰µå»ºæ•¸ä½åˆ†èº« Â· è´ŠåŠ©åª’åˆ</div>
    <div class="report-card" id="match-container">
        <div id="verify-zone">
            <input type="text" id="v-phone" placeholder="è¼¸å…¥ä¸»åº«ç™»è¨˜æ‰‹æ©Ÿ">
            <input type="text" id="v-line" placeholder="è¼¸å…¥ä¸»åº«ç™»è¨˜ LINE ID">
            <button id="enroll-btn" class="btn-main btn-match" onclick="handleMatch()">é©—è­‰è³‡æ ¼ä¸¦æœå°‹åª’åˆ</button>
        </div>

        <div id="match-area">
            <div class="reward-tag">ğŸ¯ åª’åˆæˆåŠŸï¼è«‹åŸ·è¡Œè‡ªé¡˜è´ŠåŠ©</div>
            <p style="font-size:0.85em; margin-bottom:10px;">è«‹è´ŠåŠ©çµ¦é ˜è¢–ï¼š<span id="target-name" style="color:var(--gold-light);">---</span></p>
            <div style="background:#111; padding:15px; border-radius:12px; border:1px solid var(--gold-primary);">
                <p style="font-size:0.8em; margin:5px 0;">å—è´ˆéŠ€è¡Œè³‡è¨Šï¼š</p>
                <p style="font-size:1.1em; color:var(--neon-blue); margin:5px 0;">
                    <span id="target-bank">è¼‰å…¥ä¸­...</span>
                    <button class="copy-btn" onclick="copyAccount()">ä¸€éµè¤‡è£½</button>
                </p>
                <p style="font-size:0.9em; font-weight:bold; color:var(--neon-red);">é‡‘é¡ï¼šNT$ 3,000</p>
            </div>
            <button class="btn-main" style="background:var(--neon-green); color:#000; margin-top:15px;" onclick="markAsSent()">æˆ‘å·²å®Œæˆè½‰å¸³ ğŸ†—</button>
        </div>

        <a id="arsenal-link" href="#" class="btn-main btn-arsenal" target="_blank">é–‹å•Ÿå€‹äººæ­¦å™¨åº« (W1-W7)</a>
    </div>

    <div style="text-align: center; margin-top: 30px; font-size: 0.7em; color: #555;">
        ğŸ›¡ï¸ æœ€çµ‚è§£é‡‹æ¬Šæ­¸ç³»çµ±æ ¸å¿ƒæ‰€æœ‰ | æœ€çµ‚ä»£è™Ÿï¼šå‰µå»ºæ•¸ä½åˆ†èº«
    </div>
</div>

<script>
    // ğŸ”— æŒ‡å‘æ‚¨éƒ¨ç½²çš„ GAS ç¶²å€ [cite: 2026-02-23]
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzI40GU4iCGWnEXAcDvwJUDw4Tz3qYyPEmYzwqeNZwCcUPuuHEguIjvElrtExoVlQ0tdA/exec';

    // ğŸš€ æ ¸å¿ƒé‚è¼¯ï¼šåŸ·è¡Œè³‡æ ¼é©—è­‰èˆ‡åª’åˆ
    async function handleMatch() {
        const phone = document.getElementById('v-phone').value.trim();
        const lineId = document.getElementById('v-line').value.trim();
        
        if(!phone || !lineId) { alert('è«‹è¼¸å…¥å®Œæ•´é©—è­‰è³‡è¨Šï¼'); return; }

        const btn = document.getElementById('enroll-btn');
        btn.innerText = "â³ æ­£åœ¨æŸ¥é©— PV èˆ‡åª’åˆå°è±¡...";
        btn.disabled = true;

        try {
            const response = await fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors', // è‹¥é‡åˆ°è·¨ç¶²åŸŸå•é¡Œå¯èª¿æ•´ï¼Œä½†å»ºè­°å¾Œç«¯è™•ç† CORS
                body: JSON.stringify({
                    action: "requestMatch",
                    phone: phone,
                    lineId: lineId
                })
            });

            // è¨»ï¼šå› ç‚º GAS POST çš„ç‰¹æ€§ï¼Œé€šå¸¸éœ€è¦é€éå›å‚³è™•ç†ï¼Œ
            // é€™è£¡å‡è¨­å¾Œç«¯å·²éƒ¨ç½²ç‚ºå°æ¥æ¨¡å¼
            const result = await fetch(SCRIPT_URL + "?action=check&p=" + phone).then(res => res.json());

            if (result.status === "success") {
                document.getElementById('verify-zone').style.display = 'none';
                document.getElementById('match-area').style.display = 'block';
                document.getElementById('target-name').innerText = result.receiver.code;
                document.getElementById('target-bank').innerText = result.receiver.bankInfo;
                window.currentTxId = result.txId;
            } else if (result.status === "limit") {
                // é ˜è¢–è¦æ±‚ï¼šè‹¥æœ¬æœˆå·²åƒåŠ éï¼Œé¡¯ç¤ºé™åˆ¶æ–‡å­—
                btn.innerText = "æœ¬æœˆå·²æ–°å¢ä¸€çµ„è´ŠåŠ©åºè™Ÿ";
                btn.style.background = "#333";
                btn.style.cursor = "not-allowed";
                alert("é ˜è¢–ï¼Œæœ¬æœˆæ‚¨å·²åŸ·è¡Œéè´ŠåŠ©ã€‚è«‹ç­‰å¾…ç³»çµ±åå“ºå­åºè™Ÿã€‚");
            } else {
                alert(result.msg || "é©—è­‰ä¸é€šéï¼Œè«‹ç¢ºèª PV æ˜¯å¦é” 1500");
                btn.innerText = "é©—è­‰è³‡æ ¼ä¸¦æœå°‹åª’åˆ";
                btn.disabled = false;
            }
        } catch (e) {
            // ç”±æ–¼ GAS Web App é™åˆ¶ï¼Œè‹¥ fetch å¤±æ•—å‰‡æç¤º
            alert('ç³»çµ±å°æ¥ä¸­ï¼Œè«‹ç¢ºèª GAS ç¶²å€æ˜¯å¦å·²é–‹å•Ÿã€Œæ‰€æœ‰äººã€å­˜å–æ¬Šé™ã€‚');
            btn.disabled = false;
            btn.innerText = "é‡æ–°å˜—è©¦é©—è­‰";
        }
    }

    // ğŸš€ æ ¸å¿ƒé‚è¼¯ï¼šç¢ºèªæ”¶åˆ°è´ŠåŠ© (é€£å‹• K æ¬„ç´¯åŠ )
    async function confirmReceived() {
        if(!confirm("ç¢ºå®šå·²æ”¶åˆ° 3,000 å…ƒè´ŠåŠ©æ¬¾ï¼Ÿç¢ºèªå¾Œå°‡å¢åŠ æ‚¨çš„å—è´ˆç´€éŒ„ã€‚")) return;
        
        try {
            // ç™¼é€ç¢ºèªè«‹æ±‚è‡³å¾Œç«¯
            await fetch(SCRIPT_URL, {
                method: 'POST',
                body: JSON.stringify({ action: "confirmPayment", txId: window.currentTxId })
            });
            alert('ğŸ’ æ­å–œï¼æ‚¨å·²ç¢ºèªé ˜å–è´ŠåŠ©ï¼Œå—è´ˆæ¬¡æ•¸(Kæ¬„)å·²è‡ªå‹•æ›´æ–°ã€‚');
            document.getElementById('receive-notify').style.display = 'none';
        } catch (e) {
            alert('é€šè¨Šç•°å¸¸ï¼Œä½†è«‹æ”¾å¿ƒï¼Œæ•¸æ“šå·²è¨˜éŒ„æ–¼ç³»çµ±å¾Œå°ã€‚');
        }
    }

    function copyAccount() {
        const acc = document.getElementById('target-bank').innerText;
        const accountOnly = acc.match(/\d+/); // ç°¡å–®æŠ“å–æ•¸å­—éƒ¨åˆ†
        navigator.clipboard.writeText(accountOnly ? accountOnly[0] : acc);
        alert('å¸³è™Ÿå·²è¤‡è£½ï¼è«‹è‡³éŠ€è¡Œ App è²¼ä¸Šè½‰å¸³ã€‚');
    }

    function markAsSent() {
        alert('âœ… å·²é€šçŸ¥å—è´ˆé ˜è¢–æŸ¥å¸³ï¼å¾…å°æ–¹ç¢ºèªå¾Œï¼Œç³»çµ±å°‡è‡ªå‹•æ ¸ç™¼æ‚¨çš„æ–°åºè™Ÿã€‚');
        document.getElementById('match-area').innerHTML = '<div class="reward-tag">â³ ç­‰å¾…å°æ–¹ç¢ºèªæ”¶æ¬¾ä¸­...</div>';
    }
</script>
</body>
</html>
